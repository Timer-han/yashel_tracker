## 📱 **Общее описание бота**
Бот помогает мусульманину рассчитать и отслеживать количество пропущенных намазов, а также вести учёт их восполнения. Он предлагает несколько способов расчёта, позволяет вручную вводить данные, отмечать восполненные намазы, просматривать статистику и управлять настройками.

---

## 🔁 **Последовательность действий и сообщений бота**

### 1. **Начало: Главное меню**
После запуска бота (или возврата в главное меню) пользователь видит главное меню с кнопками.

> **Бот не отправляет текст автоматически**, но при нажатии на кнопки в меню или при вводе команд появляются соответствующие сообщения.

---

### 2. **Расчёт намазов: `🔢 Расчет намазов`**

#### ➤ Пользователь нажимает: `🔢 Расчет намазов`

> **Бот пишет:**
```
🔢 Выберите способ расчета пропущенных намазов:
```
**Клавиатура:**  
- Расчет от возраста совершеннолетия  
- Расчет между двумя датами  
- Ручной ввод количества намазов  
- Расчет с указанием даты совершеннолетия

---

#### Вариант A: **Расчет от возраста совершеннолетия**

> **Бот пишет:**
```
📅 Этот метод рассчитает намазы от 12 лет до даты, когда вы начали регулярно совершать намазы.
Введите дату, когда вы начали регулярно совершать 5 намазов в день в формате ДД.ММ.ГГГГ:
Например: 01.01.2020
```

Если пользователь вводит неверный формат:

> **Бот пишет:**
```
❌ Неверный формат даты. Используйте формат ДД.ММ.ГГГГ
```

Если у пользователя нет даты рождения:

> **Бот пишет:**
```
❌ Для этого расчета нужна ваша дата рождения. Пройдите регистрацию сначала.
```

После успешного расчёта:

> **Бот пишет:**
```
✅ Расчет завершен!
📊 Рассчитано намазов от 12 лет до [дата]:
📝 **Всего пропущенных намазов: X**
Детализация:
• Фаджр: Y
• Зухр: Z
...
🤲 Пусть Аллах облегчит вам восполнение!
```
(с кнопкой "🏠 Главное меню")

---

#### Вариант B: **Расчет между двумя датами**

> **Бот пишет:**
```
📅 Введите начальную дату (с какой даты считать) в формате ДД.ММ.ГГГГ:
Например: 01.01.2015
```

Если ошибка в формате — та же ошибка:
> ```
❌ Неверный формат даты. Используйте формат ДД.ММ.ГГГГ
```

Затем:

> **Бот пишет:**
```
📅 Введите конечную дату (по какую дату считать) в формате ДД.ММ.ГГГГ:
Например: 01.06.2020
```

Если конечная дата раньше начальной:

> **Бот пишет:**
```
❌ Конечная дата должна быть больше начальной даты.
```

После успешного расчёта:

> **Бот пишет:**
```
✅ Расчет завершен!
📊 Период: с [начальная дата] по [конечная дата]
📅 Количество дней: X
📝 **Всего пропущенных намазов: Y**
Детализация:
• Фаджр: Z
...
🤲 Пусть Аллах облегчит вам восполнение!
```
(с кнопкой "🏠 Главное меню")

---

#### Вариант C: **Ручной ввод количества намазов**

> **Бот пишет:**
```
✋ **Ручной ввод намазов**
Выберите тип намаза, для которого хотите указать количество пропущенных.
```
(Клавиатура: Фаджр, Зухр, Аср, Магриб, Иша, Витр, Сафар-намазы, Завершить)

После выбора типа намаза (например, "Фаджр"):

> **Бот пишет:**
```
🕌 **Фаджр**
Введите количество пропущенных намазов типа 'Фаджр':
Например: 50
```

Если введено не число:

> **Бот пишет:**
```
❌ Пожалуйста, введите число.
```

Если отрицательное:

> **Бот пишет:**
```
❌ Количество не может быть отрицательным.
```

После ввода числа:

> **Бот пишет:**
```
✋ **Ручной ввод намазов**
✅ Сохранено:
• Фаджр: 50

Выберите следующий тип намаза или завершите ввод:
```
(Клавиатура остаётся той же)

Если пользователь нажимает "Завершить ввод":

> **Бот пишет:**
```
✅ Ручной ввод завершен!
📝 **Всего пропущенных намазов: X**
Детализация:
• Фаджр: Y
...
🤲 Пусть Аллах облегчит вам восполнение!
```
(и затем: "🏠 Возвращаемся в главное меню")

Если ни один намаз не введён:

> **Бот пишет (в виде всплывающего окна):**
```
❌ Введите хотя бы один намаз
```

---

#### Вариант D: **Расчет с указанием даты совершеннолетия**

> **Бот пишет:**
```
📅 Этот метод позволяет указать точную дату совершеннолетия.
Введите дату совершеннолетия (когда стали обязаны совершать намазы) в формате ДД.ММ.ГГГГ:
Например: 15.03.2005
```

Если ошибка в формате — стандартная ошибка:
> ```
❌ Неверный формат даты. Используйте формат ДД.ММ.ГГГГ
```

Затем:

> **Бот пишет:**
```
📅 Введите дату, когда вы начали регулярно совершать 5 намазов в день в формате ДД.ММ.ГГГГ:
Например: 01.01.2020
```

Если дата начала намазов раньше даты совершеннолетия:

> **Бот пишет:**
```
❌ Дата начала намазов должна быть позже даты совершеннолетия.
```

После расчёта:

> **Бот пишет:**
```
✅ Расчет завершен!
📊 Период: с [дата совершеннолетия] по [дата начала намазов]
📅 Количество дней: X
📝 **Всего пропущенных намазов: Y**
Детализация:
• Фаджр: Z
...
🤲 Пусть Аллах облегчит вам восполнение!
```

---

### 3. **Отметить намазы: `➕ Отметить намазы`**

#### ➤ Пользователь нажимает: `➕ Отметить намазы`

Если у пользователя нет данных о намазах:

> **Бот пишет:**
```
📊 У вас пока нет данных о намазах.
Сначала воспользуйтесь функцией '🔢 Расчет намазов'.
```

Если все намазы уже восполнены:

> **Бот пишет:**
```
🎉 Поздравляем! Все ваши намазы восполнены!
Машаа Ллах! 🤲
```

Иначе:

> **Бот пишет:**
```
➕ **Отметить восполненные намазы**
Выберите категорию намазов:
```
(Клавиатура: Обычные намазы, Сафар намазы)

---

#### ➤ Выбор категории: "Обычные намазы"

> **Бот пишет:**
```
🕌 **Обычные намазы**
➖ - восполнить намаз (уменьшить оставшиеся)
➕ - добавить пропущенный (увеличить оставшиеся)
```
(Клавиатура: кнопки для каждого намаза + "Статистика", "Назад")

---

#### ➤ Выбор категории: "Сафар намазы"

> **Бот пишет:**
```
✈️ **Сафар намазы**
➖ - восполнить намаз (уменьшить оставшиеся)
➕ - добавить пропущенный (увеличить оставшиеся)
```
(Клавиатура: Зухр сафар, Аср сафар, Иша сафар, статистика, назад)

---

#### ➤ Нажатие на кнопку "информация" у намаза (i)

> **Бот пишет (в новом сообщении):**
```
🕌 **Фаджр**
📝 Всего пропущено: X
✅ Восполнено: Y
⏳ Осталось: Z
📈 Прогресс: 45.5%
```
(Клавиатура: быстро изменить на ±1, ±5, ±10, "Готово")

---

#### ➤ Нажатие на "Статистика" из интерфейса отметки

> **Бот пишет:**
```
📊 **Ваша статистика:**
📝 Всего пропущено: X
✅ Восполнено: Y
⏳ Осталось: Z
📈 Прогресс: 67.3%
```

---

#### ➤ Нажатие на кнопку восполнения (➖)

> **Бот редактирует предыдущее сообщение и пишет:**
```
✅ **Фаджр:** восполнен 1 намаз
📝 Всего: **100** 
✅ Восполнено: **25** 
⏳ Осталось: **75**
📊 [▓▓░░░░░░░░] 25.0%
```

И тут же отправляет новое сообщение:
```
🕌 **Обычные намазы**
➖ - восполнить намаз (уменьшить оставшиеся)
➕ - добавить пропущенный (увеличить оставшиеся)
```

---

#### ➤ Нажатие на кнопку добавления (➕)

> **Бот пишет:**
```
➕ **Фаджр:** добавлен 1 пропущенный намаз
📝 Всего: **101** 
✅ Восполнено: **25** 
⏳ Осталось: **76**
📊 [▓▓░░░░░░░░] 24.8%
```

---

#### ➤ Быстрое изменение (например, ±5)

> **Бот пишет:**
```
✅ **Фаджр:** восполнено 5 намазов
📝 Всего пропущено: 100
✅ Восполнено: 30
⏳ Осталось: 70
```

---

### 4. **Статистика: `📊 Моя статистика`**

#### ➤ Пользователь нажимает: `📊 Моя статистика`

Если нет данных:

> **Бот пишет:**
```
📊 **Ваша статистика:**
У вас пока нет данных о намазах.
Используйте 🔢 Расчет намазов для настройки.
```

Иначе:

> **Бот пишет:**
```
📊 **Подробная статистика восполнения намазов:**
👤 Пользователь: [Имя]
📅 Возраст: X лет
🏙️ Город: [Город]
📝 **Всего пропущено: Y**
✅ **Восполнено: Z**
⏳ **Осталось: W**
📈 **Общий прогресс: 45.5%**
[▓░░░░░░░░░] 45.5%
📊 Среднее восполнение: ~2.1 намазов/день
⏰ Прогноз завершения: ~35 дней

📋 Детализация по намазам:

🕌 **Обычные намазы:**
• Фаджр: 20/50 (40.0% - осталось 30)
...

✈️ **Сафар намазы:**
• Зухр сафар: 5/20 (25.0% - осталось 15)
...

🤲 Да поможет вам Аллах в восполнении намазов!
```
(Клавиатура: "Показать историю", "Детальный анализ", "Обновить")

---

#### ➤ Нажатие на "Показать историю"

> **Бот пишет:**
```
📋 **Последние 10 действий:**
• ➕ Добавлено: Фаджр (5)
  100 → 105
  📅 15.03 14:22
• ➖ Убрано: Зухр (1)
  80 → 79
  📅 15.03 14:20
...
```

---

#### ➤ Нажатие на "Детальный анализ"

> **Бот пишет:**
```
🔍 **Детальный анализ по намазам:**
🕌 **Фаджр:**
   📝 Всего пропущено: 100
   ✅ Восполнено: 25
   ⏳ Осталось: 75
   📊 Прогресс: 25.0%
   [▓░░░░]

...
```

---

#### ➤ Нажатие на "Обновить"

> **Бот обновляет статистику и пишет:**
```
(то же самое сообщение, что и при первом вызове)
```
(и всплывающее окно: "🔄 Статистика обновлена")

---

### 5. **Настройки: `⚙️ Настройки`**

#### ➤ Пользователь нажимает: `⚙️ Настройки`

> **Бот пишет:**
```
⚙️ **Настройки профиля**
👤 Имя: [Имя]
👤 Пол: Мужской / Женский
📅 Дата рождения: 15.03.1990
🏙️ Город: Москва
Выберите, что хотите изменить:
```
(Клавиатура: Изменить имя, пол, дату рождения, город, экспортировать, сбросить всё, назад)

---

#### ➤ Нажатие на "Изменить имя"

> **Бот пишет:**
```
👤 Введите новое имя:
```

После ввода:

> **Бот пишет:**
```
✅ Имя успешно изменено!
```

---

#### ➤ Нажатие на "Изменить дату рождения"

> **Бот пишет:**
```
📅 Введите новую дату рождения в формате ДД.ММ.ГГГГ
Например: 15.03.1990
```

После ввода:

> **Бот пишет:**
```
✅ Дата рождения успешно изменена!
```

---

#### ➤ Нажатие на "Экспорт данных"

> **Бот пишет:**
```
📊 **Экспорт данных пользователя**
**Профиль:**
• Имя: ...
• Пол: ...
• Дата рождения: ...
• Город: ...
• Дата регистрации: ...
**Статистика намазов:**
• Всего пропущено: ...
• Восполнено: ...
• Осталось: ...
**Детали по намазам:**
• Фаджр: 20/50
...
```

---

#### ➤ Нажатие на "Сбросить всё"

> **Бот пишет:**
```
🔄 **Полный сброс данных**
⚠️ **ВНИМАНИЕ!** Это действие:
• Удалит всю статистику намазов
• Сбросит настройки профиля
• Потребует повторной регистрации
Это действие **НЕОБРАТИМО**!
Вы действительно хотите продолжить?
```
(Кнопки: "Подтвердить", "Отмена")

После подтверждения:

> **Бот пишет:**
```
✅ Все данные успешно сброшены!
Используйте команду /start для повторной регистрации.
```

---

## ✅ **Заключение**
Все тексты, которые отправляет бот, **структурированы, понятны и последовательны**. Они появляются **в ответ на действия пользователя** (нажатие кнопок, ввод текста). Бот использует **Markdown-разметку** для выделения важного, **эмодзи** для визуального восприятия и **многоуровневые меню** для удобной навигации.